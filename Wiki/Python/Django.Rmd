---
title: "Django"
output: html_document
date: "Updated: `r format(Sys.time(), '%d %B, %Y')`"
---

# HelloWorld Django

## create a python enviroment (helloenv)

```python
# use a virtual environment to store our packages to avoid polluting our global scope with unecessary packages 
pip install virtualenv

mkdir projects
cd projects
mkdir helloenv
cd helloenv

# create the environment
virtualenv -p /usr/local/bin/python3 env 
# for windows anaconda python installation path
# virtualenv -p C:/ProgramData/Anaconda3/python.exe env

# folder structure
projects
├─helloenv
│   ├── env

# activate enviroment
source env/bin/activate
# for windows
# env\\Scripts\\activate 

# will see a prompt with the environment name
(env)

```

## create a web project (helloweb)

```python
# install django
pip install django
 
# create skeleton web project
django-admin startproject helloweb

# folder structure
helloweb
├─helloweb
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── manage.py


```

## create an app (howdy)

```python
# create a Django app howdy
cd helloweb
python manage.py startapp howdy


helloweb
├── helloweb
│        ├── ...
├── howdy
│        ├── ...
└── manage.py

# add the Django app into web project by change setting.py
# helloapp/settings.py
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'howdy'
]

# run server then Go to your browser and access http://127.0.0.1:8000/
python manage.py runserver

# migrate the initial database schema to our SQLite database using the management script
# change our database schema (model) without having to lose any data
python manage.py migrate # need to stop server first

```

## create an web page in howdy

```python
# access our howdy app when someone goes to the home page URL by updating urls.py
# helloapp/urls.py
from django.conf.urls import include
urlpatterns = [
    url(r'^admin/', admin.site.urls),
    url(r'^', include('howdy.urls')),
]
```
fixes the missing url definitions in the howdy app
```python
# create new urls.py file inside the howdy app
# howdy/urls.py
from django.conf.urls import url
from howdy import views

urlpatterns = [
    url(r'^$', views.HomePageView.as_view()), # expects a view called HomePageView to be defined. 
]
```

define `HomePageView` inside the views.py
```python
# howdy/views.py
from django.shortcuts import render
from django.views.generic import TemplateView
# Create your views here.
class HomePageView(TemplateView):
    def get(self, request, **kwargs):
        return render(request, 'index.html', context=None)
        
# This file defines a view called HomePageView. Django views take in a request and return a response. In our case, the method get expects a HTTP GET request to the url defined in our urls.py file. On a side note, we could rename our method to post to handle HTTP POST requests.
```

create index.html inside the templates
```bash
cd howdy
mkdir templates
```
```bash
<!-- howdy/templates/index.html -->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Howdy!</title>
    </head>
    <body>
        <h1>Howdy! I am Learning Django!</h1>
    </body>
</html>
```
## create another web page in howdy

create about.html inside the templates
```bash
<!-- howdy/templates/about.html -->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Howdy!</title>
    </head>
    <body>
        <h1>Welcome to the about page</h1>
    <p>... </p>
    <a href="/">Go back home</a>
    </body>
</html>
```

edit index.html to link to the about.html
```bash
<!-- howdy/templates/index.html -->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Howdy!</title>
    </head>
    <body>
        <h1>Howdy! I am Learning Django!</h1>
		<a href="/about/">About Me</a>
    </body>
</html>
```

Clicking on the About me link won't work quite yet because our app doesn't have a /about/ url defined. 
edit the urls.py file in our howdy app to add it.
```python
from howdy import views

urlpatterns = [
    url(r'^admin/', admin.site.urls),
    url(r'^', include('howdy.urls')),
    url(r'^about/$', views.AboutPageView.as_view()), # Add this /about/ route
]
```

updating views.py
```python
class HomePageView(TemplateView):
    def get(self, request, **kwargs):
        return render(request, 'index.html', context=None)

# Add this view
class AboutPageView(TemplateView):
    template_name = "about.html"

# Notice that the second view did not define a get method. This is just another way of using the TemplateView class. If you set the template_name attribute, a get request to that view will automatically use the defined template. 
```

reference : https://scotch.io/tutorials/build-your-first-python-and-django-application#comments-section


# urlpatterns

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/1.11/topics/http/urls/
```bash
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  url(r'^$', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  url(r'^$', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.conf.urls import url, include
    2. Add a URL to urlpatterns:  url(r'^blog/', include('blog.urls'))
"""
```